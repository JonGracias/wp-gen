<VirtualHost *:443>
    ServerName datakiin
    ServerAdmin jon.gracias@gmail.com
    DocumentRoot /var/www/html

    # Directory for DocumentRoot
    <Directory /var/www/html/>
        Options FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # Error and Access Logs
    ErrorLog /var/log/apache2/datakiin_error.log
    CustomLog /var/log/apache2/datakiin_access.log combined

    # Enable SSL
    SSLEngine on

    # Self-signed certificate (replace with a valid certificate for production)
    SSLCertificateFile /etc/ssl/certs/ssl-cert-snakeoil.pem
    SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key

    # Lua Requests Handlers
    LuaMapHandler /lua/hello /app/lua/helloWorld.lua
    LuaMapHandler /lua/remote /app/remote.lua
    LuaMapHandler /lua/test /app/test.lua

    # Lua script directory permissions
    <Directory /app/lua/>
        Require all granted
        Options +ExecCGI
        AddHandler lua-script .lua
    </Directory>

    # Secure CGI-BIN directory
    <Directory /usr/lib/cgi-bin>
        SSLOptions +StdEnvVars
        Options ExecCGI FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>
    
</VirtualHost>
